<head>
    <meta charset="UTF-8">
    <script src="./resistors.js" type="text/javascript"></script>
    <script src="./drawing.js" type="text/javascript"></script>
</head>
<body>

    <h1>If I have a bag of resistors, can I attain this target resistance?</h1>

    <form id="resinput">
        <p>Enter resistor values (comma-separated) here: <input id="bagInput" type="text" name="bag" value="200,300,600"/></p>
        <p>Enter target resistance here: <input id="targetInput" type="text" name="target" value="100" /></p>
        <p><input type="submit" value="Calculate" /></p>
    </form>

    <canvas id="workspace" width=1000 height=1000></canvas>

    <script type="text/javascript">
        window.addEventListener('load', function() {
            let workspace = document.getElementById("workspace");
            ctx = workspace.getContext("2d");

            img = new Image();
            img.src = "https://upload.wikimedia.org/wikipedia/commons/e/ee/Resistor_symbol_America.svg";

            let form = document.getElementById("resinput");

            img.onload = function() {
                event.preventDefault();
                resImg = new ResistorImage(img, {left: {x: 1/8, y: 1/2}, right: {x: 7/8, y: 1/2}})
                form.onsubmit = function(event) {
                    event.preventDefault();
                    let bag = document.getElementById("bagInput").value.split(",").map(parseFloat)
                    let target = parseFloat(document.getElementById("targetInput").value);

                    let soln = subset_resistor_redux(bag, target);
                    console.log(soln);
                    if (!!soln) {
                        ctx.clearRect(0, 0, workspace.width, workspace.height);
                        let solnStack = soln.steps;
                        resImgGrp = drawResistorSpec(solnStack, resImg);
                        resImgGrp.draw(ctx, [0, 0]);
                    }
                }
            }

        });
    </script>
</body>
